extends layout 
include mixins/comment

block content 
    div#videoContainer(data-id=video.id)
        video(src=video.fileUrl)
        div#videoControls.videoControls
            span#play.videoControls__play
                i.fas.fa-play     
            div.videoControls__time
                span#currentTime 00:00
                span /
                span#totalTime 00:00
            input(type="range", step="1", value="0", min="0")#timeline.videoControls__timeline
            div.videoControls__volume
                input(type="range",step="0.1", value=0.5, min="0", max="1")#volume.videoControls__volumeBar
                span#mute.videocontrols__mute
                    i.fas.fa-volume-up 
                div.videoControls__scale
                    span#fullScreen 
                        i.fas.fa-expand 
    div#dataContainer
        p.video__title=video.title
        small.video__owner Uploaded by
            a(href=`/users/${video.owner.id}`)=video.owner.name
        small.video__createdAt=new Date(video.video__createdAt).toLocaleDateString("ko-kr", {
            weekday: `long`,
            year: `numeric`,
            month: `long`,
            day: `numeric`
        })
        if video.owner.id === loggedInUser.id
            a(href=`${video.id}/edit`) Edit Video &rarr;
            br
            a(href=`${video.id}/delete`) Delete Video &rarr;
        if loggedIn 
            div.video__add-comments
                form#commentForm.video__comment-form
                    textarea(cols="30", rows="10", placeholder="write a comment..")
                    button Add Comment 
        div.video__comments
            ul 
                each comment in video.comments.reverse()
                    +comment(comment)
                else 
                    span.empty__message There are no comments yet.
block scripts
    script(src="static/js/videopage/videoPlayer.js")
    if loggedIn 
        script(src="/static/js/videopage/commentSection.js")
